@inherits LayoutComponentBase

<div class="d-flex flex-column min-vh-100">
    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
        <div class="container-fluid px-3">
            <button class="navbar-toggler border-0" type="button" 
                    @onclick="DrawerToggle" 
                    aria-label="Toggle navigation">
                <i class="bi bi-list fs-4"></i>
            </button>
            
            <span class="navbar-brand mx-auto">GitHub Issue Manager</span>
            
            <button class="btn btn-link text-white border-0" type="button">
                <i class="bi bi-three-dots-vertical fs-5"></i>
            </button>
        </div>
    </nav>

    <div class="d-flex flex-grow-1">
        <!-- Side Navigation Drawer -->
        <div class="sidebar bg-light border-end @(_drawerOpen ? "show" : "")" style="width: 250px;">
            <div class="sidebar-header bg-primary text-white p-3">
                <h6 class="mb-0">GitHub Issue Manager</h6>
            </div>
            <div class="sidebar-content">
                <NavMenu />
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="flex-grow-1 overflow-auto">
            <div class="container-fluid p-4" style="max-width: 1400px;">
                @Body
            </div>
        </main>
    </div>
</div>

<!-- Error Modal -->
@if (showErrorModal)
{
    <div class="modal show d-block" tabindex="-1" style="background-color: rgba(0,0,0,0.5);">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger">Error</h5>
                    <button type="button" class="btn-close" @onclick="() => showErrorModal = false"></button>
                </div>
                <div class="modal-body">
                    <p>An unhandled error has occurred.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" @onclick="() => showErrorModal = false">
                        Cancel
                    </button>
                    <button type="button" class="btn btn-danger" @onclick="ReloadPage">
                        <i class="bi bi-arrow-clockwise me-1"></i>
                        Reload!
                    </button>
                </div>
            </div>
        </div>
    </div>
}

@code {
    bool _drawerOpen = true;
    bool showErrorModal = false;

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    void ReloadPage()
    {
        // Reload the current page
        showErrorModal = false;
        // You could add navigation logic here if needed
    }
}
